"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[886],{886:(k,C,u)=>{u.r(C),u.d(C,{WelcomePageModule:()=>F});var p=u(177),P=u(4341),v=u(5398),c=u(4742),g=u(6755),m=u(467),o=u(4438),_=u(1094);function x(r,l){if(1&r&&o.nrm(0,"img",17),2&r){const i=o.XpG();o.Y8G("src",i.imgPerfil,o.B4B)}}function M(r,l){if(1&r){const i=o.RV6();o.j41(0,"ion-card",18)(1,"div",19)(2,"div",20),o.nrm(3,"img",21),o.k0s(),o.j41(4,"div",22)(5,"div",23)(6,"h5",24),o.EFF(7),o.k0s(),o.j41(8,"p",25),o.EFF(9),o.k0s(),o.j41(10,"div",26)(11,"p")(12,"strong"),o.EFF(13,"Profesor:"),o.k0s(),o.EFF(14),o.k0s(),o.j41(15,"p")(16,"strong"),o.EFF(17,"Correo:"),o.k0s(),o.EFF(18),o.k0s()(),o.j41(19,"ion-button",14),o.bIt("click",function(){const n=o.eBV(i).$implicit,a=o.XpG();return o.Njj(a.verDetallesCurso(n))}),o.EFF(20,"Ver m\xe1s"),o.k0s()()()()()}if(2&r){const i=l.$implicit;o.R7$(3),o.Y8G("src",i.imagen||"assets/img/default-course.png",o.B4B),o.R7$(4),o.JRh(i.nombre||"Sin nombre"),o.R7$(2),o.JRh(i.descripcion||"Sin descripci\xf3n"),o.R7$(5),o.SpI(" ",(null==i.usuario?null:i.usuario.nombre_completo)||"No definido",""),o.R7$(4),o.SpI(" ",(null==i.usuario?null:i.usuario.correo)||"No definido","")}}const O=[{path:"",component:(()=>{var r;class l{constructor(e,n,a,t,s){this.route=e,this.router=n,this.menu=a,this.authService=t,this.alertController=s,this.cursos=[],this.userId="",this.nombreCompleto="",this.perfil="",this.nombre="",this.correoUsuario="",this.imgPerfil="",this.cursoID="",this.codigoMatriculaQR=""}ngOnInit(){var e=this;return(0,m.A)(function*(){try{const n=yield e.authService.getToken();console.log("Token de autenticaci\xf3n:",n),(yield e.authService.getUserInfo()).subscribe(t=>{var s,d,f,h,b;console.log("Informaci\xf3n del usuario:",t),e.nombreCompleto=(null===(s=t.data)||void 0===s?void 0:s.nombre_completo)||"Usuario",e.perfil=(null===(d=t.data)||void 0===d?void 0:d.perfil)||"No definido",e.correoUsuario=(null===(f=t.data)||void 0===f?void 0:f.correo)||"No disponible",e.imgPerfil=(null===(h=t.data)||void 0===h?void 0:h.img)||"",e.nombre=(null===(b=t.data)||void 0===b?void 0:b.nombre)||"Invitado",console.log("Correo:",e.correoUsuario),console.log("Nombre completo:",e.nombreCompleto),console.log("Perfil:",e.perfil),e.correoUsuario&&e.obtenerCursosPorCorreo(e.correoUsuario)},t=>{console.error("Error al obtener la informaci\xf3n del usuario:",t)})}catch(n){console.error("Error en el proceso de autenticaci\xf3n:",n)}})()}obtenerCursosPorCorreo(e){var n=this;return(0,m.A)(function*(){try{const t=yield(yield n.authService.getCursosPorCorreo(e)).toPromise();console.log("Cursos obtenidos:",t),t&&t.cursos?(n.cursos=t.cursos.map(s=>({...s,codigo_matricula:s.codigo_matricula?String(s.codigo_matricula):"Sin c\xf3digo"})),console.log("Lista de cursos:",n.cursos)):console.warn("No se encontraron cursos para este correo.")}catch(a){console.error("Error al obtener los cursos por correo:",a)}})()}verDetallesCurso(e){this.router.navigate(["/detalle",e.id],{state:{curso:e,userInfo:{nombreCompleto:this.nombreCompleto,perfil:this.perfil,imgPerfil:this.imgPerfil}}})}irACambiarContrasena(){this.router.navigate(["/profile"],{state:{userData:{nombreCompleto:this.nombreCompleto,perfil:this.perfil,correoUsuario:this.correoUsuario,imgPerfil:this.imgPerfil}}})}cerrarSesion(){confirm("\xbfDesea cerrar sesi\xf3n?")&&this.router.navigate(["/login"])}openMenu(){this.menu.open()}crearCurso(){var e=this;return(0,m.A)(function*(){yield(yield e.alertController.create({header:"Crear nuevo curso",inputs:[{name:"nombre",type:"text",placeholder:"Nombre del curso"},{name:"sigla",type:"text",placeholder:"Sigla del curso"},{name:"institucion",type:"text",placeholder:"Instituci\xf3n"},{name:"descripcion",type:"textarea",placeholder:"Descripci\xf3n del curso"}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Crear",handler:a=>{e.enviarDatosCurso(a)}}]})).present()})()}enviarDatosCurso(e){var n=this;return(0,m.A)(function*(){try{(yield n.authService.crearCurso(e)).subscribe(function(){var t=(0,m.A)(function*(s){console.log("Curso creado exitosamente:",s);const d=s.data;n.cursos.push(d),n.codigoMatriculaQR=d.codigo_matricula,console.log("C\xf3digo de Matr\xedcula:",n.codigoMatriculaQR)});return function(s){return t.apply(this,arguments)}}(),t=>{console.error("Error al crear el curso:",t)})}catch(a){console.error("Error en la creaci\xf3n del curso:",a)}})()}}return(r=l).\u0275fac=function(e){return new(e||r)(o.rXU(g.nX),o.rXU(g.Ix),o.rXU(c._t),o.rXU(_.u),o.rXU(c.hG))},r.\u0275cmp=o.VBU({type:r,selectors:[["app-welcome"]],decls:34,vars:5,consts:[["fullscreen","true"],["id","content"],["side","end","contentId","main-content"],[1,"perfil-container"],["alt","Imagen de perfil","class","img-perfil",3,"src",4,"ngIf"],[1,"perfil-info"],[1,"ion-padding"],[3,"click"],["name","person-outline","slot","start"],[1,"danger-item",3,"click"],["name","log-out-outline","slot","start"],["id","main-content",1,"ion-page"],["slot","end"],[1,"button-fixed"],["expand","block",3,"click"],["id","scrollable-container"],["class","custom-card",4,"ngFor","ngForOf"],["alt","Imagen de perfil",1,"img-perfil",3,"src"],[1,"custom-card"],[1,"row"],[1,"col-img"],["alt","Imagen del curso",3,"src"],[1,"col-content"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"user-info"]],template:function(e,n){1&e&&(o.j41(0,"ion-content",0)(1,"div",1)(2,"ion-menu",2)(3,"ion-header")(4,"ion-toolbar")(5,"div",3),o.DNE(6,x,1,1,"img",4),o.j41(7,"div",5)(8,"h3"),o.EFF(9),o.k0s(),o.j41(10,"p"),o.EFF(11),o.k0s()()()()(),o.j41(12,"ion-content",6)(13,"ion-list")(14,"ion-item",7),o.bIt("click",function(){return n.irACambiarContrasena()}),o.nrm(15,"ion-icon",8),o.j41(16,"ion-label"),o.EFF(17,"Perfil"),o.k0s()(),o.j41(18,"ion-item",9),o.bIt("click",function(){return n.cerrarSesion()}),o.nrm(19,"ion-icon",10),o.j41(20,"ion-label"),o.EFF(21,"Cerrar sesi\xf3n"),o.k0s()()()()(),o.j41(22,"div",11)(23,"ion-header")(24,"ion-toolbar")(25,"ion-title"),o.EFF(26),o.k0s(),o.j41(27,"ion-buttons",12),o.nrm(28,"ion-menu-button"),o.k0s()()()(),o.j41(29,"div",13)(30,"ion-button",14),o.bIt("click",function(){return n.crearCurso()}),o.EFF(31,"Crear un nuevo curso"),o.k0s()(),o.j41(32,"div",15),o.DNE(33,M,21,5,"ion-card",16),o.k0s()()()),2&e&&(o.R7$(6),o.Y8G("ngIf",n.imgPerfil),o.R7$(3),o.JRh(n.nombreCompleto||"Usuario"),o.R7$(2),o.JRh(n.perfil||"Perfil no definido"),o.R7$(15),o.SpI("Bienvenido, ",n.nombre||"Invitado",""),o.R7$(7),o.Y8G("ngForOf",n.cursos))},dependencies:[p.Sq,p.bT,c.Jm,c.QW,c.b_,c.W9,c.eU,c.iq,c.uz,c.he,c.nf,c.oS,c.MC,c.BC,c.ai],styles:['@charset "UTF-8";#content[_ngcontent-%COMP%]{background-image:url(bg-app.d9ecfab934784f63.jpg);font-family:sans-serif;height:100vh;width:100%;background-size:cover;background-position:center;background-attachment:fixed;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;padding-top:3em;padding-bottom:60px}#scrollable-container[_ngcontent-%COMP%]{flex:1;width:100%;max-height:calc(100vh - 140px);overflow-y:auto;padding:10px}.custom-card[_ngcontent-%COMP%]{display:flex;flex-direction:row;background-color:#fff;border:1px solid #ddd;border-radius:8px;margin-bottom:16px;box-shadow:0 4px 6px #0000001a;overflow:hidden}.custom-card[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;width:100%}.custom-card[_ngcontent-%COMP%]   .col-img[_ngcontent-%COMP%]{flex:1;max-width:150px}.custom-card[_ngcontent-%COMP%]   .col-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.custom-card[_ngcontent-%COMP%]   .col-content[_ngcontent-%COMP%]{flex:2;padding:16px}.custom-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{display:flex;flex-direction:column}.custom-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.2em;font-weight:700;color:#333;margin-bottom:8px}.custom-card[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{font-size:.9em;color:#555;margin-bottom:12px}.custom-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.85em;color:#777}.custom-card[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:auto;align-self:flex-start}.button-container[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%;display:flex;justify-content:space-around;padding:10px;background-color:#1a1a1a;border-radius:24px 24px 0 0;box-shadow:0 -2px 6px #0000004d;z-index:10}.img-perfil[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;object-fit:cover;margin-top:10px;border:solid 3px #000}.perfil-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.perfil-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .perfil-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}']}),l})()}];let y=(()=>{var r;class l{}return(r=l).\u0275fac=function(e){return new(e||r)},r.\u0275mod=o.$C({type:r}),r.\u0275inj=o.G2t({imports:[g.iI.forChild(O),g.iI]}),l})(),F=(()=>{var r;class l{}return(r=l).\u0275fac=function(e){return new(e||r)},r.\u0275mod=o.$C({type:r}),r.\u0275inj=o.G2t({imports:[p.MD,P.YN,c.bv,v.f,y]}),l})()}}]);