"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4936],{4936:(E,m,l)=>{l.r(m),l.d(m,{ClasePageModule:()=>j});var u=l(177),h=l(4341),a=l(4742),f=l(6755),p=l(467),e=l(4438),C=l(1094);function b(i,r){if(1&i&&e.nrm(0,"img",20),2&i){const n=e.XpG();e.Y8G("src",n.imgPerfil,e.B4B)}}function F(i,r){if(1&i&&(e.j41(0,"ion-card",21)(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3),e.k0s()(),e.j41(4,"ion-card-content")(5,"p")(6,"strong"),e.EFF(7,"Fecha:"),e.k0s(),e.EFF(8),e.nI1(9,"date"),e.k0s(),e.j41(10,"p")(11,"strong"),e.EFF(12,"Mensaje:"),e.k0s(),e.EFF(13),e.k0s()()()),2&i){const n=e.XpG();e.R7$(3),e.JRh(n.claseInfo.nombre),e.R7$(5),e.SpI(" ",e.i5U(9,3,n.claseInfo.fecha,"dd 'de' MMMM, yyyy"),""),e.R7$(5),e.SpI(" ",n.mensaje,"")}}function P(i,r){if(1&i&&(e.j41(0,"ion-card",22)(1,"ion-card-content")(2,"p")(3,"strong"),e.EFF(4,"Total de asistentes:"),e.k0s(),e.EFF(5),e.k0s()()()),2&i){const n=e.XpG();e.R7$(5),e.SpI(" ",n.totalAsistencias,"")}}function I(i,r){if(1&i&&(e.j41(0,"ion-item",24)(1,"ion-label")(2,"p")(3,"strong"),e.EFF(4,"ID:"),e.k0s(),e.EFF(5),e.k0s(),e.j41(6,"p")(7,"strong"),e.EFF(8,"Hora:"),e.k0s(),e.EFF(9),e.k0s(),e.j41(10,"p")(11,"strong"),e.EFF(12,"Presente:"),e.k0s(),e.EFF(13),e.k0s()()()),2&i){const n=r.$implicit;e.R7$(5),e.SpI(" ",n.id,""),e.R7$(4),e.SpI(" ",n.hora_asistencia,""),e.R7$(4),e.SpI(" ",n.presente,"")}}function _(i,r){if(1&i&&(e.j41(0,"ion-list"),e.DNE(1,I,14,3,"ion-item",23),e.k0s()),2&i){const n=e.XpG();e.R7$(),e.Y8G("ngForOf",n.asistencia)}}function v(i,r){1&i&&(e.j41(0,"p",25),e.EFF(1,"No se encontraron registros de asistencia."),e.k0s())}const k=[{path:"",component:(()=>{var i;class r{constructor(t,o,s,g,c){this.route=t,this.router=o,this.authService=s,this.location=g,this.menu=c,this.cursoId=null,this.codigoClase="",this.asistencia=[],this.totalAsistencias=0,this.mensaje="",this.imgPerfil="",this.nombreCompleto="",this.perfil="";const d=this.router.getCurrentNavigation();null!=d&&d.extras.state&&(this.cursoId=d.extras.state.cursoId,this.codigoClase=d.extras.state.codigo_web,console.log("ID del curso recibido en ClasePage:",this.cursoId),console.log("C\xf3digo de clase recibido en ClasePage:",this.codigoClase))}ngOnInit(){const t=this.route.snapshot.paramMap.get("id"),o=this.route.snapshot.paramMap.get("codigo");t&&(this.cursoId=Number(t)),o&&(this.codigoClase=o),null!==this.cursoId&&this.codigoClase?this.cargarHistorialAsistencia(this.cursoId,this.codigoClase):console.warn("cursoId o c\xf3digo de clase no est\xe1 definido correctamente"),this.cargarDatosUsuario()}cargarDatosUsuario(){var t=this;return(0,p.A)(function*(){try{(yield t.authService.getUserInfo()).subscribe(s=>{var g,c,d;console.log("Datos del usuario logueado:",s),t.nombreCompleto=(null===(g=s.data)||void 0===g?void 0:g.nombre_completo)||"Usuario",t.perfil=(null===(c=s.data)||void 0===c?void 0:c.perfil)||"Perfil no definido",t.imgPerfil=(null===(d=s.data)||void 0===d?void 0:d.img)||"assets/img/default-user.png"},s=>{console.error("Error al cargar los datos del usuario:",s)})}catch(o){console.error("Error al obtener los datos del usuario:",o)}})()}cargarHistorialAsistencia(t,o){var s=this;return(0,p.A)(function*(){try{(yield s.authService.obtenerHistorialAsistencia(t,o)).subscribe(c=>{s.mensaje=c.message,s.claseInfo=c.clase,s.totalAsistencias=c.total,s.asistencia=c.asistencias},c=>{console.error("Error al cargar el historial de asistencia:",c)})}catch(g){console.error("Error al solicitar el historial de asistencia:",g)}})()}regresar(){this.location.back()}openMenu(){this.menu.open()}irACambiarContrasena(){this.router.navigate(["/profile"])}cerrarSesion(){confirm("\xbfDesea cerrar sesi\xf3n?")&&this.router.navigate(["/login"])}}return(i=r).\u0275fac=function(t){return new(t||i)(e.rXU(f.nX),e.rXU(f.Ix),e.rXU(C.u),e.rXU(u.aZ),e.rXU(a._t))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-clase"]],decls:39,vars:9,consts:[["side","end","contentId","main-content"],[1,"perfil-container"],["alt","Imagen de perfil","class","img-perfil",3,"src",4,"ngIf"],[1,"perfil-info"],[1,"ion-padding"],[3,"click"],["name","person-outline","slot","start"],[1,"danger-item",3,"click"],["name","log-out-outline","slot","start"],["id","main-content",3,"fullscreen"],[3,"translucent"],["slot","start"],["name","arrow-back-outline","slot","icon-only"],["slot","end"],["id","content"],["class","info-card",4,"ngIf"],["class","asistentes-card",4,"ngIf"],[1,"asistencia-card"],[4,"ngIf"],["class","no-asistencia",4,"ngIf"],["alt","Imagen de perfil",1,"img-perfil",3,"src"],[1,"info-card"],[1,"asistentes-card"],["class","asistencia-item",4,"ngFor","ngForOf"],[1,"asistencia-item"],[1,"no-asistencia"]],template:function(t,o){1&t&&(e.j41(0,"ion-menu",0)(1,"ion-header")(2,"ion-toolbar")(3,"div",1),e.DNE(4,b,1,1,"img",2),e.j41(5,"div",3)(6,"h3"),e.EFF(7),e.k0s(),e.j41(8,"p"),e.EFF(9),e.k0s()()()()(),e.j41(10,"ion-content",4)(11,"ion-list")(12,"ion-item",5),e.bIt("click",function(){return o.irACambiarContrasena()}),e.nrm(13,"ion-icon",6),e.j41(14,"ion-label"),e.EFF(15,"Perfil"),e.k0s()(),e.j41(16,"ion-item",7),e.bIt("click",function(){return o.cerrarSesion()}),e.nrm(17,"ion-icon",8),e.j41(18,"ion-label"),e.EFF(19,"Cerrar sesi\xf3n"),e.k0s()()()()(),e.j41(20,"ion-content",9)(21,"ion-header",10)(22,"ion-toolbar")(23,"ion-buttons",11)(24,"ion-button",5),e.bIt("click",function(){return o.regresar()}),e.nrm(25,"ion-icon",12),e.k0s()(),e.j41(26,"ion-title"),e.EFF(27,"Detalle de la Clase"),e.k0s(),e.j41(28,"ion-buttons",13),e.nrm(29,"ion-menu-button"),e.k0s()()(),e.j41(30,"div",14),e.DNE(31,F,14,6,"ion-card",15)(32,P,6,1,"ion-card",16),e.j41(33,"ion-card",17)(34,"ion-card-header")(35,"ion-card-title"),e.EFF(36,"Lista de Asistencia"),e.k0s()(),e.DNE(37,_,2,1,"ion-list",18)(38,v,2,0,"p",19),e.k0s()()()),2&t&&(e.R7$(4),e.Y8G("ngIf",o.imgPerfil),e.R7$(3),e.JRh(o.nombreCompleto||"Usuario"),e.R7$(2),e.JRh(o.perfil||"Perfil no definido"),e.R7$(11),e.Y8G("fullscreen",!0),e.R7$(),e.Y8G("translucent",!0),e.R7$(10),e.Y8G("ngIf",o.claseInfo),e.R7$(),e.Y8G("ngIf",o.totalAsistencias>0),e.R7$(5),e.Y8G("ngIf",o.asistencia.length>0),e.R7$(),e.Y8G("ngIf",0===o.asistencia.length))},dependencies:[u.Sq,u.bT,a.Jm,a.QW,a.b_,a.I9,a.ME,a.tN,a.W9,a.eU,a.iq,a.uz,a.he,a.nf,a.oS,a.MC,a.BC,a.ai,u.vh],styles:['@charset "UTF-8";#content[_ngcontent-%COMP%]{background-image:url(bg-app.d9ecfab934784f63.jpg);font-family:sans-serif;height:100vh;width:100%;background-size:cover;background-position:center;background-attachment:fixed}.perfil-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;padding:16px}.img-perfil[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;object-fit:cover;border:3px solid #007bff}.perfil-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2em;color:#333}.perfil-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em;color:#555}.info-card[_ngcontent-%COMP%], .asistentes-card[_ngcontent-%COMP%], .asistencia-card[_ngcontent-%COMP%]{background:#ffffffe6;border-radius:12px;box-shadow:0 4px 8px #0000001a;margin:16px;padding:16px}.info-card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{color:#007bff;font-weight:700}.asistencia-item[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;padding:12px 16px}']}),r})()}];let M=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[f.iI.forChild(k),f.iI]}),r})(),j=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[u.MD,h.YN,a.bv,M]}),r})()}}]);