"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9350],{6969:(G,_,g)=>{g.r(_),g.d(_,{DetallePageModule:()=>w});var p=g(177),C=g(4341),a=g(4742),h=g(6755),f=g(467),e=g(4438),v=g(1094),b=g(5398);function k(r,c){if(1&r&&e.nrm(0,"img",22),2&r){const i=e.XpG();e.Y8G("src",i.imgPerfil,e.B4B)}}function D(r,c){if(1&r&&(e.j41(0,"ion-card",23)(1,"ion-card-header"),e.nrm(2,"img",24),e.j41(3,"ion-card-title"),e.EFF(4),e.k0s()(),e.j41(5,"ion-card-content")(6,"p"),e.EFF(7),e.k0s(),e.j41(8,"div",25)(9,"p")(10,"strong"),e.EFF(11,"Profesor:"),e.k0s(),e.EFF(12),e.k0s(),e.j41(13,"p")(14,"strong"),e.EFF(15,"Correo:"),e.k0s(),e.EFF(16),e.k0s()()()()),2&r){const i=e.XpG();e.R7$(2),e.Y8G("src",i.curso.imagen,e.B4B),e.R7$(2),e.JRh(i.curso.nombre),e.R7$(3),e.JRh(i.curso.descripcion),e.R7$(5),e.SpI(" ",null==i.curso.usuario?null:i.curso.usuario.nombre_completo,""),e.R7$(4),e.SpI(" ",null==i.curso.usuario?null:i.curso.usuario.correo,"")}}function F(r,c){if(1&r){const i=e.RV6();e.j41(0,"ion-row",32)(1,"ion-col",33),e.EFF(2),e.k0s(),e.j41(3,"ion-col",34),e.EFF(4),e.nI1(5,"date"),e.k0s(),e.j41(6,"ion-col",35)(7,"ion-button",36),e.bIt("click",function(){const o=e.eBV(i).$implicit,t=e.XpG(2);return e.Njj(t.verDetallesClase(t.curso.id,o))}),e.EFF(8," Ver Detalles "),e.k0s(),e.j41(9,"ion-button",37),e.bIt("click",function(){const o=e.eBV(i).$implicit,t=e.XpG(2);return e.Njj(t.mostrarQRCode(o.codigo_web))}),e.EFF(10," Generar QR "),e.k0s()()()}if(2&r){const i=c.$implicit,n=e.XpG(2);e.R7$(2),e.JRh(n.obtenerDiaSemana(i.fecha)),e.R7$(2),e.JRh(e.i5U(5,2,i.fecha,"dd 'de' MMMM, yyyy"))}}function x(r,c){if(1&r&&(e.j41(0,"ion-grid",26)(1,"ion-row",27)(2,"ion-col",28),e.EFF(3,"D\xeda"),e.k0s(),e.j41(4,"ion-col",29),e.EFF(5,"Fecha"),e.k0s(),e.j41(6,"ion-col",30),e.EFF(7,"Acciones"),e.k0s()(),e.DNE(8,F,11,5,"ion-row",31),e.k0s()),2&r){const i=e.XpG();e.R7$(8),e.Y8G("ngForOf",i.clases)}}function P(r,c){1&r&&(e.j41(0,"p"),e.EFF(1,"No se encontraron clases para este curso."),e.k0s())}function R(r,c){if(1&r){const i=e.RV6();e.j41(0,"div",38),e.nrm(1,"qrcode",39),e.j41(2,"ion-button",40),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.cerrarQRCode())}),e.EFF(3,"Cerrar QR"),e.k0s()()}if(2&r){const i=e.XpG();e.R7$(),e.Y8G("qrdata",i.codigoQR)("width",256)("errorCorrectionLevel","M")}}function j(r,c){if(1&r){const i=e.RV6();e.j41(0,"ion-item")(1,"ion-label")(2,"h2"),e.EFF(3),e.k0s(),e.j41(4,"p"),e.EFF(5),e.k0s()(),e.j41(6,"ion-button",42),e.bIt("click",function(){const o=e.eBV(i).$implicit,t=e.XpG(2);return e.Njj(t.verDetallesAnuncio(o))}),e.EFF(7,"Ver"),e.k0s()()}if(2&r){const i=c.$implicit;e.R7$(3),e.JRh(i.titulo),e.R7$(2),e.JRh(i.mensaje)}}function y(r,c){if(1&r&&(e.j41(0,"ion-list")(1,"ion-list-header")(2,"ion-label"),e.EFF(3,"Anuncios del Curso"),e.k0s()(),e.DNE(4,j,8,2,"ion-item",41),e.k0s()),2&r){const i=e.XpG();e.R7$(4),e.Y8G("ngForOf",i.anuncios)}}const E=[{path:"",component:(()=>{var r;class c{constructor(n,o,t,s,l,u){this.route=n,this.authService=o,this.alertController=t,this.location=s,this.router=l,this.menu=u,this.clases=[],this.anuncios=[],this.inasistencias=[],this.qrData="",this.showQRCode=!1,this.codigoQR="",this.nombreCompleto="",this.perfil="",this.imgPerfil="",this.correoUsuario=""}ngOnInit(){var n,o;const t=this.router.getCurrentNavigation();if(null!=t&&null!==(n=t.extras)&&void 0!==n&&n.state){var s,l,u;const d=t.extras.state;this.curso=d.curso,this.nombreCompleto=(null===(s=d.userInfo)||void 0===s?void 0:s.nombreCompleto)||"Usuario",this.perfil=(null===(l=d.userInfo)||void 0===l?void 0:l.perfil)||"Perfil no definido",this.imgPerfil=(null===(u=d.userInfo)||void 0===u?void 0:u.imgPerfil)||""}null!==(o=this.curso)&&void 0!==o&&o.id&&(this.cargarDetalleCurso(this.curso.id),this.cargarAnunciosDelCurso(this.curso.id),this.cargarClasesDelCurso(this.curso.id))}cargarDetalleCurso(n){var o=this;return(0,f.A)(function*(){try{const t=yield o.authService.getCursoPorID(n);t&&t.curso?(o.curso=t.curso,console.log("Informaci\xf3n completa del curso:",o.curso)):console.error("La respuesta no contiene la informaci\xf3n del curso esperada:",t)}catch(t){console.error("Error al solicitar los detalles del curso:",t)}})()}cargarAnunciosDelCurso(n){var o=this;return(0,f.A)(function*(){try{console.log("Cargando anuncios para el curso con ID:",n);const t=yield o.authService.getAnunciosPorCursoId(n);o.anuncios=t&&t.length>0?t:[],console.log(o.anuncios.length>0?"Anuncios cargados:":"No hay anuncios para este curso.",o.anuncios)}catch(t){console.error("Error al cargar los anuncios del curso:",t)}})()}cargarClasesDelCurso(n){var o=this;return(0,f.A)(function*(){try{(yield o.authService.getClasesPorCursoId(n)).subscribe(s=>{o.clases=s.clases||[],console.log("Datos de las clases:",o.clases),o.clases.forEach(l=>console.log("Clase:",l,"C\xf3digo web de la clase:",l.codigo_web))},s=>console.error("Error al cargar las clases del curso:",s))}catch(t){console.error("Error al solicitar las clases del curso:",t)}})()}obtenerDiaSemana(n){return["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"][new Date(n).getUTCDay()]}crearClase(n){var o=this;return(0,f.A)(function*(){var s;yield(yield o.alertController.create({header:"Crear Nueva Clase",inputs:[{name:"fecha",type:"date",placeholder:"Fecha de la clase"},{name:"horaInicio",type:"time",placeholder:"Hora de inicio"},{name:"horaTermino",type:"time",placeholder:"Hora de t\xe9rmino"}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Crear",handler:(s=(0,f.A)(function*(l){console.log("Datos de la nueva clase:",l);const u={fecha:l.fecha,hora_inicio:l.horaInicio,hora_termino:l.horaTermino};try{(yield o.authService.crearClase(n,u)).subscribe(m=>{console.log("Clase creada exitosamente:",m),o.alertController.create({header:"\xc9xito",message:"Clase creada exitosamente",buttons:["OK"]}).then(I=>I.present()),o.cargarClasesDelCurso(n.toString())},m=>{console.error("Error al crear la clase:",m)})}catch(d){console.error("Error en la creaci\xf3n de la clase:",d)}}),function(u){return s.apply(this,arguments)})}]})).present()})()}verDetallesAnuncio(n){var o=this;return(0,f.A)(function*(){yield(yield o.alertController.create({header:n.titulo,message:n.mensaje,buttons:["OK"]})).present()})()}verDetallesClase(n,o){o&&o.codigo_web?(console.log("C\xf3digo web de la clase:",o.codigo_web),this.router.navigate([`/detalle/${n}/clase/${o.codigo_web}`],{state:{cursoId:n,codigo_web:o.codigo_web}})):console.error("El c\xf3digo web de la clase no est\xe1 definido:",o)}mostrarQRCode(n){n?(this.codigoQR=n,this.showQRCode=!0,console.log("C\xf3digo QR generado:",this.codigoQR)):console.error("El c\xf3digo web de la clase no est\xe1 definido.")}cerrarQRCode(){this.showQRCode=!1,this.codigoQR=""}crearAnuncio(n){var o=this;return(0,f.A)(function*(){var s;yield(yield o.alertController.create({header:"Crear Anuncio del Curso",inputs:[{name:"titulo",type:"text",placeholder:"T\xedtulo del anuncio"},{name:"mensaje",type:"textarea",placeholder:"Mensaje del anuncio"}],buttons:[{text:"Cancelar",role:"cancel",handler:()=>{console.log("Creaci\xf3n de anuncio cancelada")}},{text:"Crear",handler:(s=(0,f.A)(function*(l){if(l.titulo&&l.mensaje)try{(yield o.authService.crearAnuncio(n,l)).subscribe(d=>{console.log("Anuncio creado exitosamente:",d)},d=>{console.error("Error al crear el anuncio:",d)})}catch(u){console.error("Error en la creaci\xf3n del anuncio:",u)}else console.error("El t\xedtulo y el mensaje son obligatorios")}),function(u){return s.apply(this,arguments)})}]})).present()})()}regresar(){this.location.back()}openMenu(){this.menu.open()}closeMenu(){this.menu.close()}irACambiarContrasena(){this.router.navigate(["/profile"],{state:{userData:{nombreCompleto:this.nombreCompleto,perfil:this.perfil,correoUsuario:this.correoUsuario,imgPerfil:this.imgPerfil}}})}cerrarSesion(){confirm("\xbfDesea cerrar sesi\xf3n?")&&this.router.navigate(["/login"])}}return(r=c).\u0275fac=function(n){return new(n||r)(e.rXU(h.nX),e.rXU(v.u),e.rXU(a.hG),e.rXU(p.aZ),e.rXU(h.Ix),e.rXU(a._t))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-detalle"]],decls:41,vars:10,consts:[["side","end","contentId","main-content","swipeGesture","true"],[1,"perfil-container"],["alt","Imagen de perfil","class","img-perfil",3,"src",4,"ngIf"],[1,"perfil-info"],[1,"ion-padding"],[3,"click"],["name","person-outline","slot","start"],[1,"danger-item",3,"click"],["name","log-out-outline","slot","start"],["id","main-content",3,"fullscreen"],["id","background"],[3,"translucent"],["slot","start"],["name","arrow-back-outline","slot","icon-only"],["slot","end"],[1,"container"],["class","info-card",4,"ngIf"],["expand","block","color","success",3,"click"],["expand","block","color","primary",3,"click"],["class","container-grid",4,"ngIf"],[4,"ngIf"],["class","qr-container",4,"ngIf"],["alt","Imagen de perfil",1,"img-perfil",3,"src"],[1,"info-card"],["alt","Imagen del curso",3,"src"],[1,"user-info"],[1,"container-grid"],[1,"header-row"],["size","3"],["size","5"],["size","4"],["class","data-row",4,"ngFor","ngForOf"],[1,"data-row"],["size","3",1,"text-center"],["size","5",1,"text-center"],["size","4",1,"text-center"],["expand","block","fill","solid","color","primary",3,"click"],["expand","block","fill","outline","color","secondary",3,"click"],[1,"qr-container"],[3,"qrdata","width","errorCorrectionLevel"],["color","danger",3,"click"],[4,"ngFor","ngForOf"],["slot","end","color","tertiary",3,"click"]],template:function(n,o){1&n&&(e.j41(0,"ion-menu",0)(1,"ion-header")(2,"ion-toolbar")(3,"div",1),e.DNE(4,k,1,1,"img",2),e.j41(5,"div",3)(6,"h3"),e.EFF(7),e.k0s(),e.j41(8,"p"),e.EFF(9),e.k0s()()()()(),e.j41(10,"ion-content",4)(11,"ion-list")(12,"ion-item",5),e.bIt("click",function(){return o.irACambiarContrasena()}),e.nrm(13,"ion-icon",6),e.j41(14,"ion-label"),e.EFF(15,"Perfil"),e.k0s()(),e.j41(16,"ion-item",7),e.bIt("click",function(){return o.cerrarSesion()}),e.nrm(17,"ion-icon",8),e.j41(18,"ion-label"),e.EFF(19,"Cerrar sesi\xf3n"),e.k0s()()()()(),e.j41(20,"ion-content",9),e.nrm(21,"div",10),e.j41(22,"ion-header",11)(23,"ion-toolbar")(24,"ion-buttons",12)(25,"ion-button",5),e.bIt("click",function(){return o.regresar()}),e.nrm(26,"ion-icon",13),e.k0s()(),e.j41(27,"ion-title"),e.EFF(28,"Detalle del Curso"),e.k0s(),e.j41(29,"ion-buttons",14),e.nrm(30,"ion-menu-button"),e.k0s()()(),e.j41(31,"div",15),e.DNE(32,D,17,5,"ion-card",16),e.j41(33,"ion-button",17),e.bIt("click",function(){return o.crearClase(o.curso.id)}),e.EFF(34,"Nueva clase"),e.k0s(),e.j41(35,"ion-button",18),e.bIt("click",function(){return o.crearAnuncio(o.curso.id)}),e.EFF(36,"Nuevo anuncio"),e.k0s(),e.DNE(37,x,9,1,"ion-grid",19)(38,P,2,0,"p",20)(39,R,4,3,"div",21)(40,y,5,1,"ion-list",20),e.k0s()()),2&n&&(e.R7$(4),e.Y8G("ngIf",o.imgPerfil),e.R7$(3),e.JRh(o.nombreCompleto||"Usuario"),e.R7$(2),e.JRh(o.perfil||"Perfil no definido"),e.R7$(11),e.Y8G("fullscreen",!0),e.R7$(2),e.Y8G("translucent",!0),e.R7$(10),e.Y8G("ngIf",o.curso),e.R7$(5),e.Y8G("ngIf",o.clases.length>0),e.R7$(),e.Y8G("ngIf",0===o.clases.length),e.R7$(),e.Y8G("ngIf",o.showQRCode),e.R7$(),e.Y8G("ngIf",o.anuncios.length>0))},dependencies:[p.Sq,p.bT,a.Jm,a.QW,a.b_,a.I9,a.ME,a.tN,a.hU,a.W9,a.lO,a.eU,a.iq,a.uz,a.he,a.nf,a.AF,a.oS,a.MC,a.ln,a.BC,a.ai,b.c,p.vh],styles:['@charset "UTF-8";#background[_ngcontent-%COMP%]{background-image:url(bg-app.d9ecfab934784f63.jpg);background-size:cover;background-position:center;background-attachment:fixed;height:100vh;width:100%;position:fixed;top:0;left:0;z-index:-1}.container[_ngcontent-%COMP%]{margin:auto;max-width:800px;background-color:#fff0;border-radius:12px;box-shadow:0 4px 8px #0003;padding:16px;max-height:calc(100vh - 70px);overflow-y:auto}.qr-container[_ngcontent-%COMP%]{text-align:center;margin-top:16px}.perfil-container[_ngcontent-%COMP%]{text-align:center;padding:16px}.img-perfil[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;border:3px solid #007bff}.perfil-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:8px 0 4px;font-size:1.2em}.perfil-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9em;color:#555}.container-grid[_ngcontent-%COMP%]{background:#ffffffe6;border-radius:12px;padding:16px;margin:16px;box-shadow:0 4px 8px #0000001a}.header-row[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;font-weight:700;text-align:center;border-radius:8px;margin-bottom:8px}.data-row[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;padding:8px 0}.text-center[_ngcontent-%COMP%]{text-align:center}ion-button[_ngcontent-%COMP%]{font-size:14px;border-radius:8px;margin:4px 0}ion-button[color=primary][_ngcontent-%COMP%]{background-color:#007bff;color:#fff}ion-button[color=secondary][_ngcontent-%COMP%]{border-color:#007bff;color:#007bff}']}),c})()}];let M=(()=>{var r;class c{}return(r=c).\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[h.iI.forChild(E),h.iI]}),c})(),w=(()=>{var r;class c{}return(r=c).\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[p.MD,C.YN,a.bv,M,b.f]}),c})()}}]);