"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8799],{8799:(I,f,c)=>{c.r(f),c.d(f,{WelcomealumPageModule:()=>O});var m=c(177),p=c(4341),h=c(5398),i=c(4742),g=c(6755),d=c(467);const v=(0,c(5083).F3)("Browser",{web:()=>c.e(4786).then(c.bind(c,4786)).then(t=>new t.BrowserWeb)});var e=c(4438),P=c(1094),C=c(4260);function x(t,l){if(1&t&&e.nrm(0,"img",18),2&t){const r=e.XpG();e.Y8G("src",r.imgPerfil,e.B4B)}}function y(t,l){if(1&t){const r=e.RV6();e.j41(0,"ion-card",19)(1,"div",20)(2,"div",21),e.nrm(3,"img",22),e.k0s(),e.j41(4,"div",23)(5,"div",24)(6,"h5",25),e.EFF(7),e.k0s(),e.j41(8,"p",26),e.EFF(9),e.k0s(),e.j41(10,"div",27)(11,"p")(12,"strong"),e.EFF(13,"Profesor:"),e.k0s(),e.EFF(14),e.k0s(),e.j41(15,"p")(16,"strong"),e.EFF(17,"Correo:"),e.k0s(),e.EFF(18),e.k0s()(),e.j41(19,"ion-button",28),e.bIt("click",function(){const n=e.eBV(r).$implicit,a=e.XpG();return e.Njj(a.verDetallesCurso(n))}),e.EFF(20,"Ver m\xe1s"),e.k0s()()()()()}if(2&t){const r=l.$implicit;e.R7$(3),e.Y8G("src",r.imagen||"assets/img/default-course.png",e.B4B),e.R7$(4),e.JRh(r.nombre||"Sin nombre"),e.R7$(2),e.JRh(r.descripcion||"Sin descripci\xf3n"),e.R7$(5),e.SpI(" ",(null==r.usuario?null:r.usuario.nombre_completo)||"No definido",""),e.R7$(4),e.SpI(" ",(null==r.usuario?null:r.usuario.correo)||"No definido","")}}const M=[{path:"",component:(()=>{var t;class l{constructor(o,n,a,u){this.authService=o,this.alertController=n,this.router=a,this.qrScannerService=u,this.cursos=[],this.userId="",this.nombreCompleto="",this.perfil="",this.nombre="",this.correoUsuario="",this.imgPerfil="",this.cursoID="",this.codigo_web=""}ngOnInit(){var o=this;return(0,d.A)(function*(){try{yield o.qrScannerService.init();const n=yield o.authService.getToken();console.log("Token de autenticaci\xf3n:",n),(yield o.authService.getUserInfo()).subscribe(function(){var u=(0,d.A)(function*(s){console.log("Informaci\xf3n del usuario:",s),o.nombreCompleto=s.data.nombre_completo||"No definido",o.perfil=s.data.perfil||"No definido",o.nombre=s.data.nombre||"No definido",o.imgPerfil=s.data.img||"",s.data.correo?(o.correoUsuario=s.data.correo,yield o.getCursosInscritos()):console.error("El correo no est\xe1 disponible.")});return function(s){return u.apply(this,arguments)}}(),u=>{console.error("Error al obtener informaci\xf3n del usuario:",u)})}catch(n){console.error("Error en el proceso de autenticaci\xf3n o carga de datos:",n)}})()}scan(){var o=this;return(0,d.A)(function*(){try{const n=yield o.qrScannerService.scan();if(n.length>0){const a=n[0];console.log("Contenido escaneado:",a),o.isValidURL(a)?yield o.openInBrowser(a):yield o.registrarAsistencia(a)}else yield o.showAlert("Error","No se detect\xf3 contenido en el QR.")}catch(n){console.error("Error al escanear el QR:",n),yield o.showAlert("Error","Hubo un problema al escanear el QR.")}})()}registrarAsistencia(o){var n=this;return(0,d.A)(function*(){try{console.log(`Registrando asistencia para el c\xf3digo: ${o}`),(yield n.authService.registrarAsistencia(o)).subscribe(function(){var u=(0,d.A)(function*(s){console.log("Asistencia registrada exitosamente:",s),yield n.showAlert("\xc9xito",`Te has registrado correctamente en el curso: ${o}`)});return function(s){return u.apply(this,arguments)}}(),function(){var u=(0,d.A)(function*(s){console.error("Error al registrar la asistencia:",s),yield n.showAlert("Error","No se pudo registrar la asistencia. Verifica el c\xf3digo.")});return function(s){return u.apply(this,arguments)}}())}catch(a){console.error("Error al registrar la asistencia:",a),yield n.showAlert("Error","Hubo un problema al registrar la asistencia.")}})()}openInBrowser(o){return(0,d.A)(function*(){!o.startsWith("http://")&&!o.startsWith("https://")&&(o="https://"+o),yield v.open({url:o})})()}showAlert(o,n){var a=this;return(0,d.A)(function*(){yield(yield a.alertController.create({header:o,message:n,buttons:["OK"]})).present()})()}isValidURL(o){try{return new URL(o),!0}catch{return!1}}getCursosInscritos(){var o=this;return(0,d.A)(function*(){try{const n=yield o.authService.getCursosInscritosEstudiante();console.log("Cursos inscritos:",n),n&&n.cursos?o.cursos=n.cursos:console.error("No hay cursos disponibles.")}catch(n){console.error("Error al obtener los cursos inscritos:",n)}})()}cerrarSesion(){confirm("\xbfDesea cerrar sesi\xf3n?")&&this.router.navigate(["/login"])}irACambiarContrasena(){this.router.navigate(["/profile"])}verDetallesCurso(o){this.router.navigate(["/detalle-est",o.id],{state:{curso:o}})}}return(t=l).\u0275fac=function(o){return new(o||t)(e.rXU(P.u),e.rXU(i.hG),e.rXU(g.Ix),e.rXU(C.V))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-welcomealum"]],decls:35,vars:5,consts:[["fullscreen","true"],["id","content"],["side","end","contentId","main-content"],[1,"perfil-container"],["alt","Imagen de perfil","class","img-perfil",3,"src",4,"ngIf"],[1,"perfil-info"],[1,"ion-padding"],[3,"click"],["name","person-outline","slot","start"],[1,"danger-item",3,"click"],["name","log-out-outline","slot","start"],["id","main-content",1,"ion-page"],["slot","end"],[1,"button-fixed"],["slot","fixed","vertical","bottom","horizontal","end"],["name","qr-code-outline"],["id","scrollable-container"],["class","card-wrapper custom-card",4,"ngFor","ngForOf"],["alt","Imagen de perfil",1,"img-perfil",3,"src"],[1,"card-wrapper","custom-card"],[1,"row"],[1,"col-img"],["alt","Imagen del curso",1,"img-fluid","rounded-start",3,"src"],[1,"col-content"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"user-info"],["expand","block",3,"click"]],template:function(o,n){1&o&&(e.j41(0,"ion-content",0)(1,"div",1)(2,"ion-menu",2)(3,"ion-header")(4,"ion-toolbar")(5,"div",3),e.DNE(6,x,1,1,"img",4),e.j41(7,"div",5)(8,"h3"),e.EFF(9),e.k0s(),e.j41(10,"p"),e.EFF(11),e.k0s()()()()(),e.j41(12,"ion-content",6)(13,"ion-list")(14,"ion-item",7),e.bIt("click",function(){return n.irACambiarContrasena()}),e.nrm(15,"ion-icon",8),e.j41(16,"ion-label"),e.EFF(17,"Perfil"),e.k0s()(),e.j41(18,"ion-item",9),e.bIt("click",function(){return n.cerrarSesion()}),e.nrm(19,"ion-icon",10),e.j41(20,"ion-label"),e.EFF(21,"Cerrar sesi\xf3n"),e.k0s()()()()(),e.j41(22,"div",11)(23,"ion-header")(24,"ion-toolbar")(25,"ion-title"),e.EFF(26),e.k0s(),e.j41(27,"ion-buttons",12),e.nrm(28,"ion-menu-button"),e.k0s()()()(),e.j41(29,"div",13)(30,"ion-fab",14)(31,"ion-fab-button",7),e.bIt("click",function(){return n.scan()}),e.nrm(32,"ion-icon",15),e.k0s()()(),e.j41(33,"div",16),e.DNE(34,y,21,5,"ion-card",17),e.k0s()()()),2&o&&(e.R7$(6),e.Y8G("ngIf",n.imgPerfil),e.R7$(3),e.JRh(n.nombreCompleto||"Usuario"),e.R7$(2),e.JRh(n.perfil||"Perfil no definido"),e.R7$(15),e.SpI("Bienvenido, ",n.nombre||"Invitado",""),e.R7$(8),e.Y8G("ngForOf",n.cursos))},dependencies:[m.Sq,m.bT,i.Jm,i.QW,i.b_,i.W9,i.Q8,i.YW,i.eU,i.iq,i.uz,i.he,i.nf,i.oS,i.MC,i.BC,i.ai],styles:['@charset "UTF-8";#content[_ngcontent-%COMP%]{background-image:url(bg-app.d9ecfab934784f63.jpg);font-family:sans-serif;height:100vh;width:100%;background-size:cover;background-position:center;background-attachment:fixed;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;padding-top:3em;padding-bottom:60px}#scrollable-container[_ngcontent-%COMP%]{flex:1;width:100%;max-height:calc(100vh - 140px);overflow-y:auto;padding:10px}.custom-card[_ngcontent-%COMP%]{display:flex;flex-direction:row;background-color:#fff;border:1px solid #ddd;border-radius:8px;margin-bottom:16px;box-shadow:0 4px 6px #0000001a;overflow:hidden}.custom-card[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;width:100%}.custom-card[_ngcontent-%COMP%]   .col-img[_ngcontent-%COMP%]{flex:1;max-width:150px}.custom-card[_ngcontent-%COMP%]   .col-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.custom-card[_ngcontent-%COMP%]   .col-content[_ngcontent-%COMP%]{flex:2;padding:16px}.custom-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{display:flex;flex-direction:column}.custom-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.2em;font-weight:700;color:#333;margin-bottom:8px}.custom-card[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{font-size:.9em;color:#555;margin-bottom:12px}.custom-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.85em;color:#777}.custom-card[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:auto;align-self:flex-start}.button-container[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%;display:flex;justify-content:space-around;padding:10px;background-color:#1a1a1a;border-radius:24px 24px 0 0;box-shadow:0 -2px 6px #0000004d;z-index:10}.img-perfil[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;object-fit:cover;margin-top:10px;border:solid 3px #000}.perfil-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.perfil-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .perfil-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}']}),l})()}];let F=(()=>{var t;class l{}return(t=l).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[g.iI.forChild(M),g.iI]}),l})(),O=(()=>{var t;class l{}return(t=l).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[m.MD,p.YN,i.bv,h.f,F]}),l})()}}]);